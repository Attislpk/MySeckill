<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.seckill.dao.SeckillDao">
<!--建立sql语句映射-->

<!--    根据商品id查询商品信息
 不推荐使用select * -->
    <select id="getById" resultType="Seckill" parameterType="long">

        select seckill_id, name, number,create_time, start_time, end_time from seckill where seckill_id = #{seckillId}
    </select>

<!--    查询所有商品信息-->
    <select id="getSeckillList" resultType="Seckill" parameterType="int">
        select seckill_id, name, number,create_time, start_time, end_time from seckill
        order by start_time asc
        limit #{offset}, #{limit}
    </select>

<!--    减少商品库存-->
    <update id="reduceNumber">
        update seckill set number = number - 1
        where seckill_id = #{seckillId}
        and #{killTime} >= start_time and #{killTime} <![CDATA[<=]]> end_time and number > 0
    </update>

</mapper>